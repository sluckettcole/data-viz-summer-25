---
title: "Data Visualization: Day 1"
author: "Erik Westlund"
date: "2025-06-02"
date-modified: "`r format(Sys.Date(), '%Y-%m-%d')`"
---

# Welcome to Data Visualization

## Housekeeping

::: {.incremental}
- Who am I?
- Contact information
- Course materials
:::

## Who am I?

- I am a data scientist at the Johns Hopkins Bloomberg School of Public Health
- I work out of the Johns Hopkins Biostatistics Center in the Department of Biostatistics
- I was trained in the social sciences and have worked profesionally as a data scientist and software developer for over 10 years

## Contact information

- Email: ewestlund@jhu.edu

## Course materials

- [Course GitHub repository](https://github.com/erikwestlund/data-viz-summer-25): <br>
  https://github.com/erikwestlund/data-viz-summer-25
- [CoursePlus Website](https://courseplus.jhu.edu/core/index.cfm/go/course.home/coid/23902/): <br>
  https://courseplus.jhu.edu/core/index.cfm/<br>go/course.home/coid/23902/

## Course Goals

::: {.incremental}
- Understanding of core data visualization concepts
- Develop strong data science & data visualization workflows
- Learn to produce high-quality data visualizations
- Learn to communicate effectively with and about data visualizations
:::

## Course Outline

::: {.incremental}
- Introduction to data visualization
- Tooling & worfklow
- Data preparation
- Grammar of graphics
- Making good, honest graphics
- Dashboards
:::

# Introduction to Data Visualization

## Edward Tufte: Graphical Excellence is....

::: {.columns}
::: {.column width="50%"}
![Edward Tufte](images/tufte.jpg)
:::

::: {.column width="50%"}

> "Graphical excellence is the well-designed presentation of interesting data—a matter of substance, of statistics, and of design..."

*Edward Tufte, The Visual Display of Quantitative Information, 1983*

:::
:::

## Dense

::: {.columns}
::: {.column width="50%"}
![Edward Tufte](images/tufte.jpg)
:::

::: {.column width="50%"}

> "It is that which gives to the view the great number of ideas in the shortest time with the least ink in the smallest space..."

*Edward Tufte, The Visual Display of Quantitative Information, 1983*

:::
:::

## Multivariate

::: {.columns}
::: {.column width="50%"}
![Edward Tufte](images/tufte.jpg)
:::

::: {.column width="50%"}

> "It is nearly always multivariate..."

*Edward Tufte, The Visual Display of Quantitative Information, 1983*

:::
:::

## Truthful

::: {.columns}
::: {.column width="50%"}
![Edward Tufte](images/tufte.jpg)
:::

::: {.column width="50%"}

> "Graphical excellence requires telling the truth about the data..."

*Edward Tufte, The Visual Display of Quantitative Information, 1983*

:::
:::

## Exemplar: Napoleon's March


![Charles Minard's Napoleon's March](images/minard_napoleon.png)


## Achieving Minard's Graphical Excellence

> "[Minard's classic image] can be described and admired, but there are no compositional principles on how to create that one wonder graphic in a million.""

*Edward Tufte, The Visual Display of Quantitative Information, 1983*

## For The Rest of Us 

Instead, Tufte suggests:

::: {.incremental}
* "[For] more routine, workaday designs"
* "[Have] a properly chosen format and design"
* "Use words, numbers, and drawing together"
* "[D]isplay an accessible complexity of detail" 
* "Avoid content-free decoration, including chartjunk"
:::

We will revisit more of Tufte's principles throughout the course.

# Tooling & Workflow

* It is worth investing in learning your tools
* A good data visualization workflow requires good tooling and workflow
* Below we will discuss some of the tools we will use in this course and why we use them

## Required Software For This Course

## R

::: {.columns}

::: {.column width="75%"}
* We will rely mostly on R for this course
* R can be downloaded from [r-project.org](https://www.r-project.org/)
:::

::: {.column width="25%"}

![R Logo](images/r.png)
:::

:::


## `ggplot2`

::: {.columns}

::: {.column width="75%"}
* `ggplot2` is a powerful package for creating data visualizations
* It is built on the grammar of graphics
* It is a declarative grammar for data visualization
:::

::: {.column width="25%"}
![ggplot2 Logo](images/ggplot2.png)
:::

:::

## git

::: {.columns}

::: {.column width="75%"}
* `git` is a powerful tool for version control
* It allows you to 
  * track changes to your code
  * revert to previous versions of your code
  * collaborate with others on your code
  * maintain multiple branches/versions of your code
  * and more
:::

::: {.column width="25%"}
![git Logo](images/git.png)
:::

:::

## GitHub

::: {.columns}

::: {.column width="75%"}
* `git` is not GitHub
* GitHub is a web-based platform for hosting and collaborating on code
* It is technically a remote repository for `git`
* It gives you a place to store your code and collaborate with others
* It is free for open source projects
:::

::: {.column width="25%"}
![GitHub Logo](images/github.png)
:::

:::

## Scientific Notebooks

::: {.columns}

::: {.column width="75%"}
* Notebooks are a powerful way to work with data and do data visualization
* They allow you to embed code, text, and visualizations in a single document
* They thus allow you to easily share both the process and the results of your work
* I do not require a specific notebook system for this course, but I will be using Quarto for examples
:::

::: {.column width="25%"}
![Notebook Logo](images/lab-notebook.jpg)
:::

:::

## Notebooks: Quarto

::: {.columns}

::: {.column width="75%"}
* Quarto is an open source scientific and technical publishing system
* You can create reports, websites, presentations, and books with Quarto
* This presentation is built with Quarto
* You can embed Python, R, and other code in in plaintext Quarto documents
* Quarto renders down to a document in HTML, PDF, or Word format
:::

::: {.column width="25%"}
![Quarto Logo](images/quarto.png)
:::

:::

## RMarkdown

::: {.columns}

::: {.column width="75%"}
* RMarkdown is a way to create documents that mix R code and text
* It integrates with RStudio well and has a very similar workflow to Quarto
* RMarkdown renders down to a document in HTML, PDF, or Word format; the files them selves are plain text
* Easy to store notebooks in version control with git
:::

::: {.column width="25%"}
![RMarkdown Logo](images/rmarkdown.png)
:::

:::

## Jupyter 

::: {.columns}

::: {.column width="75%"}
* Jupyter is a notebook system popular with Python users
* Jupyter stores code and results in the same document (Quarto/RMarkdown render into a separate document)
* Jupyter supports R and other languages
* Jupyter stores itself as JSON (javascript object notation) files and are not as easy to diff in git
:::

::: {.column width="25%"}
![Jupyter Logo](images/jupyter.png)
:::

:::


## Optional/Popular Software


## RStudio

::: {.columns}

::: {.column width="75%"}
* RStudio is a powerful IDE for R
* It is free and open source
* It helps you understand what is in your environment (e.g., variables, functions, packages, etc.)
* It also makes it easy to view your visualizations as you make them
:::

::: {.column width="25%"}
![RStudio Logo](images/rstudio.png)
:::

:::

## Python

::: {.columns}

::: {.column width="75%"}
* Python is a powerful general purpose programming language that is very popular in the data science community, especially in machine learning
* It has A-tier data management and scientific computing libraries, such as `pandas` and `numpy`
* It has a large ecosystem of packages for data visualization, including `matplotlib` and `seaborn`
:::

::: {.column width="25%"}
![Python Logo](images/python.png)
:::

:::

## LLMs

::: {.columns}

::: {.column width="75%"}
* LLMs are commonly used to help with code
* Common ones used in data science are ChatGPT, Claude, Gemini, and GitHub's Copilot
* They can help you write code, debug code, and write documentation
* They can also make mistakes, so you cannot blindly trust their work
:::

::: {.column width="25%"}
![GitHub Copilot Logo](images/copilot.png)
:::

:::

# AI, LLMs, and Data Visualization

## AI and Data Visualization

* AI and LLMs are becoming more and more powerful
* They can help you with many data-related tasks, but require care
* They are allowed in this course, but you are responsible for checking their work

## My Philosophy

* I use LLMs in nearly all aspects of my work
* I have found that there is now less value in being able to "make computer do something" and more in high level concepts
* To that extent, in this course we will try to focus a little more on concepts and less on `ggplot2` syntax, since LLMs really can mostly solve technical visualization problems


# Prerequisites for Today

## Tools To Install

* R: Install at [r-project.org](https://www.r-project.org/)
* RStudio: Install at [rstudio.com](https://posit.co/products/open-source/rstudio/)
* Git: Install at [git-scm.com](https://git-scm.com/)

## Accounts To Create

* GitHub: Create an account at [github.com](https://github.com/)

## Setup Tasks

You may need to configure your git username and email.

```bash
git config --global user.name "Your Name"
git config --global user.email "your.email@example.com"
```

On Windows, you can run this in "Git Bash". On Mac, you can run this in the terminal.

# Project Organization & Tooling

## Before We Do Actual Visualization

* I am spending a lot of time on tools and organization
* This may seem off-topic, but I assure you it is not
* Efficient workflows and reproducible work are key to success in data science

## Benefits Of Being Organized 

* **Efficiency**: Find files quickly
* **Reproducibility**: Others can follow your work
* **Collaboration**: Team members understand your structure
* **Maintenance**: Easier to update and fix issues
* **Scalability**: Structure grows with your project

## Naming Convention Challenges

* Files need to be:
  * Easy to find
  * Easy to understand
  * Easy to sort
  * Easy to version control

* Common problems:
  * Unclear file purposes
  * Inconsistent naming
  * Missing execution order
  * Lost files in nested directories
  * Confusion about latest versions

## Course Naming Conventions

I recommend these conventions:

```
work/
├── example_*         # Learning examples
├── ps1_*             # Problem set 1
├── ps2_*             # Problem set 2
├── ps3_*             # Problem set 3
├── final_project_*   # Final project
├── shared_*          # Shared resources
└── data/             # Data directory
```

* Prefixes indicate purpose
* Numbers show execution order
* It is a best practice to document your structure in a README

## Real-World Flexibility

* These conventions are a starting point
* Real projects often need:
  * Different structures for different teams
  * Adaptation as projects grow
  * Balance between consistency and flexibility
  * Documentation of changes

## Directory Structure Options

1. Flat Structure:
   ```
   work/
   ├── data_prep.qmd
   ├── analysis.qmd
   └── data/
   ```

2. Nested Structure:
   ```
   work/
   ├── data_prep/
   │   └── data_prep.qmd
   ├── analysis/
   │   └── analysis.qmd
   └── data/
   ```

## The Challenge of Subdirectories

::: {.callout-warning}
## Relative Paths are Tricky!

* Files in subdirectories need to reference parent directories
* Paths like `../../data/file.csv` are:
  * Error-prone
  * Hard to maintain
  * Break when moving files
  * Confusing to read
:::

## The `.Rproj` File

* Defines your project root
* Sets the working directory
* Stores project settings
* Makes paths relative to project root
* Essential for project portability

## The `here` Package

```r
library(here)

# Instead of "../../data/file.csv"
read_csv(here("data", "file.csv"))
```

* Builds paths from project root
* Works from any subfolder
* More readable than `../`
* More maintainable

## Benefits of Good Path Management

* Paths work from anywhere
* No more `../` counting
* More maintainable
* More portable
* Easier collaboration

### When to Change Structure?

* As project complexity grows
* When working with multiple datasets
* When collaborating with others
* When sharing code with different audiences


# Getting Started with RStudio, Projects, Quarto, and `git`

## Goals

* Learn the data science workflow: RStudio, projects, Quarto, and `git`
* Set up your course workspace
* Create your first notebook

## Fork/Open the Course Repository

1. Fork the course repo on GitHub
2. In RStudio: File -> New Project -> From Version Control
3. Paste your fork URL and create

## Exploring the Example Project

1. Open `examples/project-example/`
2. Notice the structure:
   - `_quarto.yml` for configuration
   - Numbered notebooks
   - `data/` directory
   - `.gitignore`

## Setting Up Your Work Directory

1. Create new project in `work/` using RStudio (File -> New Project -> Existing Directory)
2. Select the "work" directory in the repository we just forked

I have tested this and RStudio appears to be able to handle the remote repository in the directory one higher up.


## Your Work Directory

::: {.callout-note}
## Important!

The `work/` directory is your personal workspace for **everything** in this course:

* All homework assignments
* Course projects
* Learning examples
* Your final project

**You are responsible for:**

* Keeping your work organized
* Following the naming conventions
* Maintaining a clean project structure
* Documenting your organization in README

This is your space - keep it clean and organized!
:::

## Configuring Your Project (1/2)

Let's get a file set up to work with Quarto and have data to read from.

1. Copy `example_project_quarto.yml` from `examples` to `_quarto.yml` in your new project
2. Create `data/` directory

## Configuring Your Project (2/2)

We are now going to create a file called `.gitignore` to tell git to ignore certain files.

1. Create a file called `.gitignore` (if it doesn't already exist)


## Understanding `.gitignore`

::: {.callout-warning}
## Never Commit Sensitive Data!

* `.gitignore` tells Git which files to ignore
* Critical for:
  * Protecting sensitive data
  * Preventing accidental commits
  * Keeping repositories clean
:::

## Why `.gitignore` Matters

* **Data Privacy**:
  * Health data is sensitive
  * Patient information must be protected
  * Legal requirements (HIPAA, etc.)
  * Ethical obligations

* **Repository Health**:
  * Prevents large binary files
  * Avoids temporary files
  * Keeps repository size manageable
  * Makes collaboration easier

## Our `.gitignore` Setup

```
# Data directory
data/

# R specific
.Rproj.user
.Rhistory
.RData
```

* `data/`: Keeps all data files local
* `.Rproj.user`: RStudio temporary files
* `.Rhistory`: Command history
* `.RData`: R workspace files

## Creating Your First Notebook (1/4)

In RStudio:

  * Click File -> New File -> Quarto Document
  * In the dialog:
    - Title: "Data Preparation Example"
    - Author: Your Name
    - Format: HTML
    - Template: Default
  * Click "Create"
  * Save as `example_data_prep.qmd` in your `work/` directory

## Notebook Setup (2/4)

In RStudio:

  * The YAML header will be automatically created at the top of your file
  * It will look like this:

```yaml
---
title: "Data Preparation Example"
author: "Your Name"
date: "`r format(Sys.Date(), '%Y-%m-%d')`"
format: html
---
```

## Data Preparation (3/4)

Let's create the data preparation setup file.

Include this as a setup block:

```{=html}
<pre><code class="language-r">```{r setup-prep}
#| echo: false
library(dplyr)
library(readr)
```</code></pre>
```

And then this to load and prepare the data:

```{=html}
<pre><code class="language-r">```{r load-data}
# Load and prepare data
mtcars_clean <- mtcars |>
  mutate(
    car_name = rownames(mtcars),
    efficiency = mpg / wt
  )

# Save processed data
write_csv(mtcars_clean, "data/mtcars_clean.csv")
```</code></pre>
```

## Render the File (4/4)

* Knit the file to see the results
* We will get two outputs:

  1. A rendered HTML file
  2. A data file stored in the `data/` directory

## Create an Analysis Notebook (1/23)

In RStudio:

  * Click File -> New File -> Quarto Document
  * In the dialog:
    - Title: "Data Analysis Example"
    - Author: Your Name
    - Format: HTML
    - Template: Default
  * Click "Create"
  * Save as `example_analysis.qmd` in your `work/` directory

## Set Up the Analysis Notebook (2/2)

```{=html}
<pre><code class="language-r">```{r setup-analysis}
#| echo: false
library(dplyr)
library(ggplot2)
```</code></pre>
```

```{=html}
<pre><code class="language-r">```{r load-processed}
# Load processed data
mtcars_clean <- read_csv("data/mtcars_clean.csv")
```</code></pre>
```

We're going to pause here, and make sure we can commit our code to GitHub. We'll come back later and make a few basic plots.

## Version Control Setup (1/2)

You should already have:
1. Forked the course repository from GitHub
2. Cloned your fork to your local machine

Now, let's set up version control in your project. Choose your preferred method:

### Option A: Using RStudio's Git Interface
1. In RStudio, go to Tools → Version Control → Project Setup
2. Select "Git" as the version control system
3. Click "Create Repository"
4. In the Git tab (usually in the top-right panel):
   - Click "Add" to stage all files (or select individual files)
   - Enter commit message: "Initial project setup"
   - Click "Commit"
   - Click "Push" to sync with your fork

### Option B: Using Terminal Commands
1. In the terminal:
   ```bash
   git add .
   git commit -m "Initial project setup"
   git push
   ```

## Version Control Workflow

### Option A: Using RStudio's Git Interface
1. Stage changes: Click "Add" in the Git tab
2. Commit: Enter message and click "Commit"
3. Push: Click "Push" to sync with your fork

### Option B: Using Terminal Commands
1. Stage changes: `git add .`
2. Commit: `git commit -m "Description of changes"`
3. Push: `git push`

Choose whichever method you're most comfortable with as both accomplish the same thing!

## Next Steps

* Your workspace is ready in `work/`
* You can pull course updates
* Your work is version controlled